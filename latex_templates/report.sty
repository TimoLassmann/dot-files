\ProvidesPackage{report}


\renewcommand{\baselinestretch}{1.05}
\usepackage{libertinus}
\usepackage{libertinust1math}
\usepackage[T1]{fontenc}

\setcounter{secnumdepth}{0}
\pagestyle{empty}
%\usepackage{cmbright}
%\setmainfont{Times New Roman}
%\usepackage[utf8]{inputenc}
\usepackage{bm}
\usepackage{graphicx}
\usepackage{subfigure}
\usepackage{caption}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{enumitem}
\usepackage{tcolorbox}
\usepackage{minted}
\usepackage{filecontents}
\setlist[enumerate]{labelwidth=20pt,labelindent=0pt,leftmargin=*,labelsep=5pt,align=left,topsep=2pt, parsep=2pt, itemsep=2pt}
\setlist[itemize]{labelwidth=20pt,labelindent=0pt,leftmargin=*,labelsep=5pt,align=left,topsep=2pt, parsep=2pt, itemsep=0pt}


\usepackage{pgfplots}
\usepackage{setspace}
\usepackage{hyperref}
\usepackage{textcomp}
\usepackage{verbatim}
\usepackage{color}
\usepackage{xcolor}
\usepackage{tikz}
\usepackage{lipsum}
\usepackage{calc}
\usepackage{booktabs}
\usepackage{float}
\usepackage{tkz-euclide}
\usetikzlibrary{decorations.text}
\usetikzlibrary{shapes,arrows, positioning, calc}
\usetikzlibrary{backgrounds}
\usetikzlibrary{plotmarks}


\usepackage{lipsum}
\usepackage{wrapfig}
\usepackage{etaremune}
\usepackage[natbib=true,style=nature,maxnames=100, minnames=1,hyperref=auto,backref=true,sorting=none,backend=bibtex]{biblatex}

\renewcommand{\footref}[1]{\let\thefootnote\relax\footfullcite{ #1}}


\usepackage{xpatch}
\usepackage{geometry}
\geometry{twoside=true,
  head=13pt,
  paperwidth=8.5in,
  paperheight=11in,
  includeheadfoot,
  columnsep=2pc,
  top=57pt,
  bottom=73pt,
  inner=54pt,
  outer=54pt,
  marginparwidth=2pc,
  heightrounded
}%


\def\makenamesetup{%
  \def\bibnamedelima{~}%
  \def\bibnamedelimb{ }%
  \def\bibnamedelimc{ }%
  \def\bibnamedelimd{ }%
  \def\bibnamedelimi{ }%
  \def\bibinitperiod{.}%
  \def\bibinitdelim{~}%
  \def\bibinithyphendelim{.-}}
\newcommand*{\makename}[2]{\begingroup\makenamesetup\xdef#1{#2}\endgroup}

\newcommand*{\boldname}[3]{%
  \def\lastname{#1}%
  \def\firstname{#2}%
  \def\firstinit{#3}}
\boldname{}{}{}

% Patch new definitions
\renewcommand{\mkbibnamegiven}[1]{%
  \ifboolexpr{ ( test {\ifdefequal{\firstname}{\namepartgiven}} or test {\ifdefequal{\firstinit}{\namepartgiven}} ) and test {\ifdefequal{\lastname}{\namepartfamily}} }
  {\mkbibbold{#1}}{#1}%
}

\renewcommand{\mkbibnamefamily}[1]{%
  \ifboolexpr{ ( test {\ifdefequal{\firstname}{\namepartgiven}} or test {\ifdefequal{\firstinit}{\namepartgiven}} ) and test {\ifdefequal{\lastname}{\namepartfamily}} }
  {\mkbibbold{#1}}{#1}%
}

\boldname{Lassmann}{Timo}{T.}

\definecolor{grantblue}{RGB}{5,99,193}

\hypersetup{
  colorlinks   = true,
  linkcolor    = grantblue,
  citecolor    = grantblue,
  urlcolor     = grantblue
}

\DefineBibliographyStrings{english}{%
  backrefpage = {page},% originally "cited on page"
  backrefpages = {pages},% originally "cited on pages"
}


\addbibresource{~/work/bibliography/references}
\addbibresource{ref.bib}

\renewcommand*{\bibfont}{\normalsize}
\SetLabelAlign{parright}{\parbox[t]{\labelwidth}{\raggedleft#1}}


\graphicspath{{../images/}{../../images/}}

%\linespread{1.2}


%\geometry{a4paper,
%,
%}

\DeclareCaptionFormat{upper}{#1#2\uppercase{#3}\par}
\captionsetup{format=plain,labelfont={bf},textfont={normalsize},figurename=Figure,tablename=TABLE,singlelinecheck=off,justification=raggedright} %format = upper

%%% fancy sections
\usepackage{titlesec}
\usepackage[normalem]{ulem}
%\titleformat{\chapter}{\headingfont\LARGE\bfseries\scshape\color{color1}}{\thechapter}{1em}{}[\titlerule]

%\renewcommand{\thesection}{\Alph{section}.}

%\titleformat{\section}[hang]{\sffamily\color{IndianRed3}\bfseries\scshape\filleft\lsstyle}{}{2em}{#1\quad\rule[-0.25cm]{1.5pt}{1cm}\rlap{\qquad\Huge \thesection}}%

%\titleformat{\section}{\large\bfseries}{\Alph{section}.}{1em}{}
%\titleformat{\subsection}[wrap]{\normalfont\bfseries}{}{1em}{}

%\titleformat{\subsection}{\color{red}\normalsize\bfseries}{\thesubsection}{1em}{}
%\titleformat{\subsubsection}{\normalsize\itshape}{\thesubsubsection}{1em}{}
\setcounter{secnumdepth}{4}
%% \renewcommand\thesubsection{\arabic{subsection}.}
%% \renewcommand\thesubsubsection{\arabic{subsection}.\arabic{subsubsection}.}
%\renewcommand\thesubsubsubsection{\arabic{subsection}.\arabic{subsubsection}.\arabic{subsubsubsection}.}


%% \titleformat{\section}{\color{grantblue}\normalfont\large\selectfont\bfseries}{}{0.0em}{}
%% \titleformat{\subsection}{\color{grantblue}\selectfont\bfseries}{\Alph{subsection}. }{0.25em}{}
%% \titleformat{\subsubsection}{\color{grantblue}\normalfont\normalsize\selectfont\itshape}{}{0.5em}{}
%% \titleformat{\subsubsubsection}{\normalfont\normalsize\selectfont\itshape}{\thesubsubsubsection}{0.5em}{}
\titleformat{\paragraph}[runin]{\color{grantblue}\normalfont\normalsize\itshape}{}{0em}{\uline}[:\enspace]
\definecolor{SchemeLight}   {HTML} {686868}
\definecolor{SchemeSteel}   {HTML} {888888}
\definecolor{SchemeDark}    {HTML} {262626}
\definecolor{SchemeBlue}    {HTML} {4172A3}
\definecolor{SchemeGreen}   {HTML} {487818}
\definecolor{SchemeBrown}   {HTML} {A07040}
\definecolor{SchemeRed}     {HTML} {AD4D3A}
\definecolor{SchemeViolet}  {HTML} {7040A0}
\definecolor{DropCapGray}   {HTML} {B8B8B8}
\definecolor{ChapterGray}   {HTML} {C8C8C8}
\definecolor{ChapterViolet} {HTML} {AEAECE}
\definecolor{DropCapViolet} {HTML} {9090C0}


\titleformat{\section}
{\color{SchemeDark}\bfseries\Large\section@raggedright\MakeTextUppercase}
{\color{DropCapViolet}\thesection}{0.8em}{}

\titleformat{\subsection}
{\color{SchemeDark}\bfseries\Large\section@raggedright}
{\color{DropCapViolet}\thesubsection}{0.8em}{}

\titleformat{\subsubsection}
{\color{black}\normalfont\normalsize\sffamily\bfseries}
{\color{DropCapViolet}\thesubsubsection}{0.8em}{}





\titlespacing*{\section}{0pt}{0.25cm}{0.25cm}
\titlespacing*{\subsection}{0pt}{0.25cm}{0.1cm}
\titlespacing*{\subsubsection}{0pt}{0.1cm}{0.1cm}
%\titlespacing*{\subsubsubsection}{0pt}{*0}{0.1cm}
\titlespacing*{\paragraph}{0pt}{*0}{*0}

\setlength{\parindent}{0cm}



\renewcommand{\maketitle}{

\begin{center}
\begin{tikzpicture}
    \node[draw=none,%color1,line width=0.4pt,
      fill=white,
      inner ysep = 0pt,
      text width=\textwidth,
     % text centered
    ]{\Huge\sffamily\bfseries\@title};
\end{tikzpicture}
\end{center}
}

%%%
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}


% head and foot
\usepackage{fancyhdr}
\pagestyle{fancy}
%\setlength{\headheight}{5.0pt}

%\setlength{\footskip}{50.99991pt}

\lhead{}
\chead{}
\rhead{}




%\makeatother
%\newlength{\myheight}
\lfoot{\color{gray}{\footnotesize \@author, \@date} }
\cfoot{}
\rfoot{\color{gray}{\footnotesize Page \thepage}}
\renewcommand\headrulewidth{0pt}
\renewcommand\footrulewidth{0pt}
%%%



\newcommand{\boldintro}[1]{
\noindent{\textbf{#1:}}
}


\newenvironment{grayblock}{ \begin{tcolorbox}[width=\textwidth,colback={black!10!white}]}{\end{tcolorbox}}


\newenvironment{notes}{ \begin{tcolorbox}[colback=red!5!white,colframe=red!75!black,title=Notes, width=\textwidth,colback={red!10!white},arc=2pt,boxrule=2pt]}{\end{tcolorbox}}



\tikzstyle{fancyframe} = [draw=gray,
    rectangle, rounded corners=2pt, inner sep=5pt, inner ysep=5pt]

\newcommand{\rightimage}[4][Title of the box]{%
\vspace{0.25cm}
\setlength{\intextsep}{0pt}
\begin{wrapfigure}{r}{#3}

\begin{tikzpicture}
\node [fancyframe] (box){%
    \begin{minipage}{#3-1cm}
    #2
    \end{minipage}
};
%\node[fancytitle, right=10pt] at (box.north west) {#1};
%\node[fancytitle, rounded corners] at (box.east) {$\clubsuit$};
\end{tikzpicture}%
\caption{#1}
\label{#4}
\end{wrapfigure}
\vspace{0.25cm}
}

\newcommand{\horizimageleft}[4][Title of the box]{
\vspace{0.25cm}
\begin{figure}[H]
   \begin{minipage}[c]{#3}
   \begin{tikzpicture}
   \node [fancyframe] (box){#2} ;
          %\fill [blue] (0,0) rectangle (6,4);
       \end{tikzpicture}
      \end{minipage}%
   \begin{minipage}[c]{\textwidth-#3}
    \caption{#1}
 \label{#4}

   \end{minipage}


  \end{figure}
  \vspace{0.25cm}
}

\newcommand{\horizimageright}[4][Title of the box]{

\vspace{0.25cm}
\begin{figure}[H]
\begin{minipage}[c]{\textwidth-#3}
    \caption{#1}
         \label{#4}
 \end{minipage}
   \begin{minipage}[c]{#3}
   \raggedleft
   \begin{tikzpicture}
   \node [fancyframe] (box){#2} ;
          %\fill [blue] (0,0) rectangle (6,4);
       \end{tikzpicture}
      \end{minipage}%



  \end{figure}
\vspace{0.25cm}
}

%\newcommand{\beginsupplement}{%
  %      \setcounter{table}{0}
  %      \renewcommand{\thetable}{S\arabic{table}}%
  %      \setcounter{figure}{0}
  %      \renewcommand{\thefigure}{S\arabic{figure}}%
  %   }


\makeatletter
\def\parsecomma#1,#2\endparsecomma{\def\page@x{#1}\def\page@y{#2}}
\tikzdeclarecoordinatesystem{page}{
    \parsecomma#1\endparsecomma
    \pgfpointanchor{current page}{north east}
    % Save the upper right corner
    \pgf@xc=\pgf@x%
    \pgf@yc=\pgf@y%
    % save the lower left corner
    \pgfpointanchor{current page}{south west}
    \pgf@xb=\pgf@x%
    \pgf@yb=\pgf@y%
    % Transform to the correct placement
    \pgfmathparse{(\pgf@xc-\pgf@xb)/2.*\page@x+(\pgf@xc+\pgf@xb)/2.}
    \expandafter\pgf@x\expandafter=\pgfmathresult pt
    \pgfmathparse{(\pgf@yc-\pgf@yb)/2.*\page@y+(\pgf@yc+\pgf@yb)/2.}
    \expandafter\pgf@y\expandafter=\pgfmathresult pt
}
\makeatother
